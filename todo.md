# Техническое задание: WIC для macOS

## 1. Общее описание проекта

### 1.1 Название проекта
WIC

### 1.2 Цель проекта
Разработка нативного приложения для macOS, предназначенного для удобного управления окнами с помощью горячих клавиш. Приложение должно предоставлять функциональность, аналогичную популярным сторонним инструментам (Rectangle, Magnet), но быть оптимизировано для устройств Apple Silicon M4.

### 1.3 Платформа
- macOS 12.0 и выше
- Оптимизация для Apple Silicon M4 (использование Metal, оптимизированные вычисления)
- Поддержка Intel Mac (для совместимости)

### 1.4 Язык разработки
Swift 5.5+

### 1.5 Фреймворки
- SwiftUI для пользовательского интерфейса
- AppKit для низкоуровневого управления окнами
- Accessibility API для взаимодействия с окнами других приложений

## 2. Функциональные требования

### 2.1 Основные функции управления окнами
- Прикрепление окон к краям экрана (лево, право, верх, низ)
- Разделение экрана на половины, четверти, трети
- Центрирование окон
- Максимизация и минимизация окон
- Перемещение окон между мониторами (если подключено несколько)
- Сохранение и восстановление раскладок окон
- Автоматическое приклеивание окон к краям экрана при приближении (auto-snap)

### 2.2 Горячие клавиши
- Настраиваемые комбинации клавиш для каждой операции
- Поддержка модификаторов (Cmd, Ctrl, Alt, Shift)
- Возможность отключения/включения горячих клавиш

### 2.3 Пользовательский интерфейс
- Меню в статус-баре для быстрого доступа
- Настройки приложения с возможностью кастомизации
- Индикаторы для активных раскладок

### 2.4 Дополнительные возможности
- Интеграция с Mission Control и Spaces
- Поддержка Split View
- Автоматическое управление окнами при подключении/отключении мониторов
- Автоматическое приклеивание окон к краям экрана при приближении к ним (snap-to-edge)
- Поддержка вертикального расположения дисплеев (например, 2K над Full HD)
- Темная/светлая тема интерфейса

## 3. Нефункциональные требования

### 3.1 Производительность
- Минимальное потребление ресурсов CPU и памяти
- Быстрый отклик на горячие клавиши (< 100ms)
- Оптимизация для Apple Silicon M4 (использование SIMD, Metal compute)

### 3.2 Безопасность
- Соблюдение Privacy API macOS
- Не хранение конфиденциальных данных
- Защита от несанкционированного доступа к окнам

### 3.3 Совместимость
- Поддержка macOS 12.0+
- Совместимость с различными разрешениями экранов
- Поддержка внешних мониторов

### 3.4 Доступность
- Поддержка VoiceOver
- Клавиатурная навигация

## 4. Архитектура приложения

### 4.1 Структура проекта
- WIC (главное приложение)
  - WICApp.swift (точка входа)
  - ContentView.swift (основной UI)
  - WindowManager.swift (логика управления окнами)
  - HotkeyManager.swift (управление горячими клавишами)
  - SettingsView.swift (настройки)
  - AccessibilityHelper.swift (взаимодействие с Accessibility API)

### 4.2 Ключевые компоненты
- Hotkey Handler: Обработка глобальных горячих клавиш
- Window Manipulator: Изменение размеров и позиций окон
- Settings Manager: Сохранение и загрузка настроек
- UI Controller: Управление пользовательским интерфейсом

## 5. Требования к разработке

### 5.1 Код
- Чистый, читаемый код на Swift
- Использование MVVM паттерна
- Комментарии и документация

### 5.2 Тестирование
- Unit-тесты для основных функций
- UI-тесты для интерфейса
- Тестирование на различных конфигурациях macOS

### 5.3 Документация
- README.md с инструкцией по установке и использованию
- Комментарии в коде

## 6. Этапы разработки

1. Исследование и прототипирование
2. Реализация базового управления окнами
3. Добавление горячих клавиш
4. Разработка пользовательского интерфейса
5. Тестирование и оптимизация
6. Релиз

## 7. Риски и ограничения

- Ограничения Accessibility API macOS
- Необходимость получения разрешений от пользователя
- Конкуренция с существующими приложениями (Rectangle, Magnet)
